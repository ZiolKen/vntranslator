<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta content="ie=edge" http-equiv="X-UA-Compatible" />
  <meta name="theme-color" content="#0b0b10" />

  <title>Ren‚ÄôPy RPY Translator | VN Translator</title>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <link rel="stylesheet" href="renpy.css" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BXTNE3VPWH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BXTNE3VPWH');
  </script>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div id="particles-js"></div>
    <div class="grid"></div>
    <div class="glow"></div>
  </div>

  <div id="libreWarningModal" class="modal">
    <div class="modal-content">
      <button class="close-modal" aria-label="Close modal">&times;</button>
      <h3>Important Notice About Lingva Translate</h3>

      <div class="notice-content">
        <ul class="notice-list">
          <li>Lingva is a free service that may not perfectly preserve Ren‚ÄôPy code structure.</li>
          <li>Use it for testing or when you can manually review results.</li>
          <li>For production-quality formatting preservation, use DeepSeek.</li>
        </ul>
      </div>

      <div class="modal-footer">
        <button id="confirmLibre" class="btn btn--warn">I Understand</button>
      </div>
    </div>
  </div>

  <header class="topbar">
    <a class="brand" href="../">
      <span aria-hidden="true">
        <img class="brand__img" src="https://files.catbox.moe/2x5vw3.jpeg" alt="VN Translator" />
      </span>
      <span class="brand__text">
        <span class="brand__name">VN Translator</span>
        <span class="brand__tag">Ren‚ÄôPy ‚Ä¢ RPG Maker ‚Ä¢ Text Tools</span>
      </span>
    </a>

    <nav class="nav">
      <a class="nav__link nav__link--active" href="./">Ren‚ÄôPy</a>
      <a class="nav__link" href="../rpgm/">RPG Maker</a>
      <a class="nav__link" href="../game-text-editor/">Game Text Editor</a>
      <a class="nav__link nav__link--muted" href="../rpgmu/">RPGM Ultimate</a>
    </nav>

    <div class="topbar__actions">
      <a class="pill pill--ghost" href="#settings">Settings</a>
      <a class="pill pill--primary" href="../">Back</a>
    </div>
  </header>

  <main class="wrap">
    <section class="pageHead">
      <div class="pageHead__left">
        <div class="badge">
          <span class="dot" aria-hidden="true"></span>
          Ren‚ÄôPy RPY Translator
        </div>

        <h1 class="title">
          Translate <span class="accent">.rpy</span> files safely.
        </h1>

        <p class="subtitle">
          Choose a model ‚Üí upload your RPY ‚Üí translate ‚Üí download result & logs. Designed for large scripts and clean formatting.
        </p>

        <div class="quickActions">
          <a class="btn btn--ghost" href="how-to-get-renpy-rpy.html" target="_blank" rel="noopener noreferrer">üìÇ How to get RPY?</a>
          <a class="btn btn--ghost" href="how-to-get-deepseek-api-key.html" target="_blank" rel="noopener noreferrer">‚ùì DeepSeek API Key</a>
          <a class="btn btn--ghost" href="rpy-dialog-extractor.html" target="_blank" rel="noopener noreferrer">üîÑ Extract dialogs & Merge</a>
        </div>
      </div>

      <div class="pageHead__right">
        <div class="miniPanel">
          <div class="miniPanel__row">
            <div class="miniPanel__k">Recommended</div>
            <div class="miniPanel__v"><span class="chip chip--ok">DeepSeek</span> Best formatting</div>
          </div>
          <div class="miniPanel__row">
            <div class="miniPanel__k">Free option</div>
            <div class="miniPanel__v"><span class="chip">Lingva</span> Needs review</div>
          </div>
          <div class="miniPanel__row">
            <div class="miniPanel__k">Tip</div>
            <div class="miniPanel__v">Use dialog extractor to reduce breakage</div>
          </div>
        </div>
      </div>
    </section>

    <section class="layout">
      <div class="col">
        <section id="settings" class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Translation Settings</div>
              <div class="panel__hint">Configure model, key, language, and file</div>
            </div>
          </div>

          <div class="panel__body form">
            <div class="form-row">
              <div class="field">
                <label for="modelSelect">Translation Model</label>
                <select id="modelSelect">
                  <option value="deepseek">üî• DeepSeek API (Paid - Best)</option>
                  <option value="deepl">üî∞ DeepL API (Free/Paid - Good)</option>
                  <option value="libre">üåê Lingva (Free - Stable)</option>
                </select>
                <div class="help">DeepSeek recommended for preserving Ren‚ÄôPy formatting.</div>
              </div>
            </div>

            <div class="form-row two">
              <div class="field" id="apiKeyContainer">
                <label for="apiKey">DeepSeek API Key</label>
                <input id="apiKey" type="password" placeholder="Enter your DeepSeek API Key" autocomplete="off">
              </div>

              <div class="field" id="deeplKeyContainer" style="display:none;">
                <label for="deeplApiKey">DeepL API Key</label>
                <input id="deeplApiKey" type="password" placeholder="Enter your DeepL API Key" autocomplete="off">
              </div>
            </div>

            <div class="form-row two">
              <div class="field">
                <label for="langTarget">Target Language</label>
                <select id="langTarget">
                  <option value="Bahasa Indonesia">Indonesian</option>
                  <option value="English">English</option>
                  <option value="Malay">Malay</option>
                  <option value="Vietnamese">Vietnamese</option>
                  <option value="Filipino">Filipino</option>
                </select>
              </div>

              <div class="field">
                <label for="fileInput">Upload .rpy File</label>
                <input id="fileInput" type="file" accept=".rpy">
                <div class="help">Only .rpy ‚Äî keep a backup of the original.</div>
              </div>
            </div>

            <div class="form-row">
              <div class="field">
                <label>Progress</label>
                <div class="progress">
                  <progress id="progressBar" value="0" max="1000"></progress>
                  <div id="progressText" class="progress__text">0/0</div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Translation Control</div>
              <div class="panel__hint">Start, preview, download result & logs</div>
            </div>
          </div>

          <div class="panel__body">
            <div class="controls">
              <button id="translateBtn" class="btn btn--primary btn--block">
                <span id="translateLabel">‚ñ∂Ô∏è Start Translating</span>
                <span id="spinner" class="spinner hidden" aria-hidden="true"></span>
              </button>

              <div class="controls__grid">
                <button id="downloadFinal" class="btn btn--secondary">‚¨áÔ∏è Download Result</button>
                <button id="downloadProgress" class="btn btn--ghost">‚¨áÔ∏è Download Log</button>
                <button id="previewBtn" class="btn btn--ghost" disabled>‚ÑπÔ∏è Preview/Edit Manual</button>
              </div>

              <div id="controlBtns" class="controls__row" style="display:none;">
                <button id="stopBtn" class="btn btn--warn">‚è∏ Stop</button>
                <button id="resumeBtn" class="btn btn--ghost" disabled>üîÑ Resume</button>
              </div>
            </div>
          </div>
        </section>

        <section class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Notice</div>
              <div class="panel__hint">Avoid surprises in formatting</div>
            </div>
          </div>

          <div class="panel__body notice">
            <div class="noticeBox">
              <div class="noticeBox__t">Suggest</div>
              <ul class="notice-list">
                <li>Use the <b>RPY Dialog Extraction & Merge Tool</b> to extract dialogs, translate, then merge back.</li>
              </ul>
            </div>

            <div class="noticeBox">
              <div class="noticeBox__t">Important</div>
              <ul class="notice-list">
                <li>DeepSeek requires an API key but preserves Ren‚ÄôPy formatting better.</li>
                <li>Lingva is free but may require manual adjustments.</li>
              </ul>
            </div>

            <div class="risk">
              ‚ö†Ô∏è By using this tool, you agree to accept all kinds of risks.
            </div>
          </div>
        </section>
      </div>

      <div class="col">
        <section class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Translation Log</div>
              <div class="panel__hint">Realtime output for debugging</div>
            </div>
          </div>

          <div class="panel__body">
            <div id="logBox" class="log">[SYSTEM_BOOT] :: Awaiting input...</div>
          </div>
        </section>

        <section class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Support & Resources</div>
              <div class="panel__hint">Help links + sponsor</div>
            </div>
          </div>

          <div class="panel__body">
            <div class="support">
              <div class="support__block">
                <div class="support__label">Support this project</div>
                <div class="support__buttons">
                  <a class="supportBtn" href="https://www.buymeacoffee.com/_zkn" target="_blank" rel="noopener noreferrer">‚òï Buy me a coffee</a>
                  <a class="supportBtn supportBtn--patreon" href="https://www.patreon.com/ZiolKen" target="_blank" rel="noopener noreferrer">‚ù§Ô∏è Patreon</a>
                </div>
              </div>

              <div class="support__block">
                <div class="support__label">Get help</div>
                <div class="support__links">
                  <a class="helpBtn" href="rpy-dialog-extractor.html" target="_blank" rel="noopener noreferrer">üîÑ Extract RPY dialogs & Merge</a>
                  <a class="helpBtn" href="https://grviewer.com/" target="_blank" rel="noopener noreferrer">üîÅ Extract RPA & Decompile RPYC</a>
                  <a class="helpBtn" href="how-to-get-deepseek-api-key.html" target="_blank" rel="noopener noreferrer">‚ùì How to get a DeepSeek API Key?</a>
                  <a class="helpBtn" href="how-to-get-renpy-rpy.html" target="_blank" rel="noopener noreferrer">üìÇ How to get RPY file from game?</a>
                </div>
              </div>
            </div>
          </div>
        </section>

        <div class="backRow">
          <a href="../" class="backBtn">‚¨ÖÔ∏è Back to Main Menu</a>
        </div>
      </div>
    </section>
  </main>

  <script>
    const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const particleCount = isMobile ? 35 : 70;

    particlesJS("particles-js", {
      "particles": {
        "number": { "value": particleCount, "density": { "enable": true, "value_area": 900 } },
        "color": { "value": "#a855f7" },
        "shape": { "type": "circle", "stroke": { "width": 0, "color": "#000" } },
        "opacity": { "value": 0.45, "random": true, "anim": { "enable": false } },
        "size": { "value": 2.2, "random": true, "anim": { "enable": false } },
        "line_linked": { "enable": true, "distance": 155, "color": "#a855f7", "opacity": 0.18, "width": 1 },
        "move": { "enable": true, "speed": 0.8, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": { "onhover": { "enable": true, "mode": "repulse" }, "onclick": { "enable": false }, "resize": true },
        "modes": { "repulse": { "distance": 90, "duration": 0.35 } }
      },
      "retina_detect": true
    });
  </script>

  <script src="./renpy.js"></script>
</body>

</html>