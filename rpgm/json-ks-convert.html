<!DOCTYPE html>
<html lang="en">
    
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta content="ie=edge" http-equiv="X-UA-Compatible" />
  <meta name="theme-color" content="#0b0b10" />

  <title>KS Extractor (Tyranobuild & Kirikiri) | VN Translator</title>

  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="convert.css" />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BXTNE3VPWH"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BXTNE3VPWH');
  </script>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <div id="particles-js"></div>
    <div class="grid-bg"></div>
    <div class="glow"></div>
  </div>

  <header class="topbar">
    <a class="brand" href="./">
      <span aria-hidden="true">
        <img class="brand__img" src="https://files.catbox.moe/2x5vw3.jpeg" alt="VN Translator" />
      </span>
      <span class="brand__text">
        <span class="brand__name">VN Translator</span>
        <span class="brand__tag">Ren‚ÄôPy ‚Ä¢ RPG Maker ‚Ä¢ Text Tools</span>
      </span>
    </a>

    <nav class="nav">
      <a class="nav__link" href="../renpy/">Ren‚ÄôPy</a>
      <a class="nav__link" href="./">RPG Maker</a>
      <a class="nav__link" href="../game-text-editor/">Game Text Editor</a>
      <a class="nav__link nav__link--active" href="#">KS Extractor</a>
    </nav>

    <div class="topbar__actions">
      <a class="pill pill--primary" href="./">Back</a>
    </div>
  </header>

  <main class="wrap">
    <section class="pageHead">
      <div class="pageHead__left">
        <div class="badge">
          <span class="dot" aria-hidden="true"></span>
          Kirikiri/Tyranobuild Utility
        </div>

        <h1 class="title">
          KS Extractor <span class="accent">+ JSON Merge</span>
        </h1>

        <p class="subtitle">
          Convert .ks ‚Üí .json for translation, then merge translated .json back into the original .ks.
        </p>

        <div class="quickActions">
          <a class="btn btn--ghost" href="./">üïπÔ∏è RPG Maker JSON Translator</a>
          <a class="btn btn--ghost" href="../">üè† Home</a>
        </div>
      </div>

      <div class="pageHead__right">
        <div class="miniPanel">
          <div class="miniPanel__row">
            <div class="miniPanel__k">Version</div>
            <div class="miniPanel__v"><span class="chip chip--ok">Beta 1.4</span></div>
          </div>
          <div class="miniPanel__row">
            <div class="miniPanel__k">Tip</div>
            <div class="miniPanel__v">Backup files before merge</div>
          </div>
          <div class="miniPanel__row">
            <div class="miniPanel__k">Credits</div>
            <div class="miniPanel__v">
              Thanks to <a class="link" href="https://youtube.com/@kiyu-uq8xt?si=JCqbeQgXLkcmTEkb" target="_blank" rel="noopener">Zenpai Misaki</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="layout">
      <div class="col">
        <section class="panel" id="extractCard">
          <div class="panel__header">
            <div>
              <div class="panel__title">Extract .KS</div>
              <div class="panel__hint">Select one or multiple .ks files</div>
            </div>
          </div>

          <div class="panel__body">
            <input type="file" id="ksFile" accept=".ks" multiple />
            <div class="helpLine">Outputs a JSON file you can translate with VN Translator tools.</div>
          </div>
        </section>

        <section class="panel" id="mergeCard">
          <div class="panel__header">
            <div>
              <div class="panel__title">Merge .KS</div>
              <div class="panel__hint">Combine translated JSON with original KS</div>
            </div>
          </div>

          <div class="panel__body">
            <label for="jsonFile">üìÇ Select translated <b>.json</b> file</label>
            <input type="file" id="jsonFile" accept=".json" />

            <div class="spacer"></div>

            <label for="ksOriginFile">üìÇ Select original <b>.ks</b> file</label>
            <input type="file" id="ksOriginFile" accept=".ks" />

            <button id="mergeBtn" class="btn btn--ok btn--block" style="margin-top:12px;">üîÄ Combine JSON + KS</button>
          </div>
        </section>

        <section class="panel">
          <div class="panel__header">
            <div>
              <div class="panel__title">Notice</div>
              <div class="panel__hint">Limitations & workflow</div>
            </div>
          </div>

          <div class="panel__body notice">
            <p class="notice__lead"><b>Beta Version 1.4</b></p>
            <ul class="notice-list">
              <li>üß© This tool is still in <b>Experiment (Beta)</b>.</li>
              <li>‚öôÔ∏è Complex KS may require re-checking extracted text.</li>
              <li>üõ† KS ‚Üí JSON and JSON ‚Üí KS works well for standard projects.</li>
              <li>üîÅ Merge needs translated JSON + original KS.</li>
              <li>üîÑ Translate exported JSON via <a href="./" target="_blank" rel="noopener">RPG Maker JSON Translator</a>.</li>
              <li>‚ö†Ô∏è Use at your own risk ‚Äî always backup first.</li>
            </ul>
          </div>
        </section>

        <div class="backRow">
          <a href="./" class="backBtn">‚¨ÖÔ∏è Back to Translator</a>
        </div>

        <div class="footer-note">
          ‚ö†Ô∏è By using this tool, you agree to accept all kinds of risks.
        </div>
      </div>

      <div class="col">
        <section class="panel panel--log">
          <div class="panel__header">
            <div>
              <div class="panel__title">Conversion Log</div>
              <div class="panel__hint">Extraction / merge output</div>
            </div>
          </div>

          <div class="panel__body">
            <textarea id="output" class="log-container" readonly>[SYSTEM_BOOT] :: Awaiting input...</textarea>
          </div>
        </section>
      </div>
    </section>
  </main>

  <script>
    const isMobile = /Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    const particleCount = isMobile ? 60 : 111;

    particlesJS("particles-js", {
      "particles": {
        "number": { "value": particleCount, "density": { "enable": true, "value_area": 950 } },
        "color": { "value": "#a855f7" },
        "shape": { "type": "circle", "stroke": { "width": 0, "color": "#000" } },
        "opacity": { "value": 0.40, "random": true, "anim": { "enable": false } },
        "size": { "value": 2.2, "random": true, "anim": { "enable": false } },
        "line_linked": { "enable": true, "distance": 160, "color": "#a855f7", "opacity": 0.16, "width": 1 },
        "move": { "enable": true, "speed": 0.75, "direction": "none", "random": false, "straight": false, "out_mode": "out", "bounce": false }
      },
      "interactivity": {
        "detect_on": "canvas",
        "events": { "onhover": { "enable": true, "mode": "repulse" }, "onclick": { "enable": false }, "resize": true },
        "modes": { "repulse": { "distance": 90, "duration": 0.35 } }
      },
      "retina_detect": true
    });
  </script>

  <script src="convert.js"></script>
</body>

</html>